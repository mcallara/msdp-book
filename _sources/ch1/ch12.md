---
jupytext:
  formats: md:myst
  text_representation:
    extension: .md
    format_name: myst
    format_version: 0.13
    jupytext_version: 1.11.5
kernelspec:
  display_name: Bash
  language: bash
  name: bash
---

```{code-cell} bash
:tags: ["remove-input","remove-output"]
cd ../home
mkdir ch1
cd ch1
```

# 1.2 Local repositories and commit

In this chapter, we will explore the creation of local repositories and the process of committing changes. We will also learn how to interact with Git using the command line and Visual Studio Code (VSC).

## Creating a dummy project
If we want to learn about Git, we need a project to work with. Git can track changes in any type of files, it doesn't have to be code. So to keep it simple, we will create a dummy project, which will be just a directory with some text files in it.

```{admonition} Test your knowledge
:class: hint 
 - Create an empty directory for our project and name it `my-project`.
 - Change into your project directory.
 - Verify that the directory is empty and that it does not contain any hidden files.
```

```{code-cell} bash
:tags: ["hide-input","remove-output"]
mkdir my-project
cd my-project
ls -a
```

## Initialize a repository
To tell Git that you want it to keep track of your project changes, we need to initialize a Git repository. To do that we use the `git init` command. 

```{code-cell} bash
git init -b main
```

```{admonition} What to notice
:class: hint
After initializing the repository:
- A new hidden directory named `.git` is created inside the project directory. This directory will contain all the necessary files to keep track of the changes in the project.

In Visual Studio Code (VSC):
- The main branch is mentioned in the left bottom corner of the window.
- The `.git` folder is not visible in the explorer because is hidden by default to avoid accidental changes. You can modify this behavior in the settings.
```

```{admonition} Test your knowledge
:class: hint 
 - Verify that the `.git` directory was created.
```

```{code-cell} bash
ls -a
```

```{admonition} Know more: Main vs Master branch
:class: note
From Git 2.28 onwards, the default branch name can be changed by using the command `git config --global init.defaultBranch main`.
```

```{code-cell} bash
:tags: ["remove-input","remove-output"]
git config --global init.defaultBranch main
```

Check the repository status:

```{code-cell} bash
git status
```

## Deleting the Git repository
We learned how to initialize the repository, let's know learn how to delete it. 
To delete the repository, we can just delete the `.git` folder.

```{code-cell} bash
rm -rf .git
```

If you try this command you will need to initialize the repository again with:

```{code-cell} bash
git init -b main
```

## Areas of Git
Exploring the `.git` folder and its subdirectories:

```{code-cell} bash
ls .git -a
ls .git/objects -a
```

## What is a commit?

```{admonition} Test your knowledge
:class: hint 
 - Use the terminal to create a new file named `file1.txt`.
 - Use the terminal to add the text "This is file 1." to the file.
```

```{code-cell} bash
:tags: ["hide-input","remove-output"]
touch file1.txt
echo -n "This is file 1." >> file1.txt
```

```{admonition} What to notice
:class: hint 
In VSC:
- the file appears in the Explorer with a "U" symbol indicating it's untracked.
```

## The two steps of a commit
Add the file to the staging area and commit:

```{code-cell} bash
git add file1.txt
git commit -m "Add file1.txt"
```

```{admonition} What to notice
:class: hint 
- After adding, the file moves to the staging area. 
- After committing, it's no longer marked with an "A" but is committed to the repository.
```

Check the repository status again:

```{code-cell} bash
git status
```

List the commits:

```{code-cell} bash
git log
```

```{admonition} What to notice
:class: hint 
- The commit is now listed.
- Explore the `.git/objects` directory to see the objects created by Git.
```

```{code-cell} bash
ls -a .git/objects
```

## Summary
We covered creating a repository, adding and committing a file, and the significance of the `.git` and objects directories.

## References
- [Official using Git with VSC Beginner Tutorial](https://www.youtube.com/watch?v=i_23KUAEtUM)
